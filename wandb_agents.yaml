TaskName: "wandb-sweep-agents-9z168o0z"
Description: "Run 8 wandb agents in parallel, 1 GPU per replica"
Tags:
  - "wandb"
  - "sweep"
  - "perturbench"

# å®¿ä¸»æœºä»£ç è·¯å¾„ï¼ˆä¼šè¢«ä¸Šä¼ /æŒ‚è½½ï¼‰
UserCodePath: "/fs-computility-new/upzd_share/maoxinjie/AIVC/mxj/perturbench-main/"
# å®¹å™¨å†…æŒ‚è½½è·¯å¾„
RemoteMountCodePath: "/root/code"

# å®¹å™¨å†…æ‰§è¡Œè„šæœ¬
Entrypoint: "bash /root/code/run_one_agent.sh"

# é€šè¿‡ env ä¼  sweep idï¼ˆğŸ”´ è¿™å°±æ˜¯ä½ é—®çš„é‚£ä¸ª SWEEP_IDï¼‰
Envs:
  - Name: "SWEEP_ID"
    Value: "xinjiemao60-westlake-university/perturbench/9z168o0z"
    IsPrivate: false
  - Name: "PROJECT_DIR"
    Value: "/root/code"
    IsPrivate: false
  - Name: "HYDRA_FULL_ERROR"
    Value: "1"
    IsPrivate: false

# âœ… ä½ çš„é•œåƒï¼ˆç¡®è®¤å¯ç”¨ï¼‰
ImageUrl: "fs-computility-cn-beijing.cr.volces.com/nvidia/mxj-benchmark:251224"

# âœ… ä½ çš„é˜Ÿåˆ—
ResourceQueueName: "pdz_share"

Framework: "Custom"

TaskRoleSpecs:
  - RoleName: "worker"
    RoleReplicas: 8              # ğŸ”´ å…³é”®ï¼š8 ä¸ªå‰¯æœ¬ = 8 å¼ å¡
    Flavor: "ml.g1ie.large"      # æŒ‰ä½ é˜Ÿåˆ—é‡Œçš„ 1-GPU è§„æ ¼è°ƒæ•´
    # GpuRate: 1.0               # æ•´å¡ï¼ˆå¯çœç•¥ï¼‰

ActiveDeadlineSeconds: "48h"
AccessType: "Private"
