# scLAMBDA Model Configuration

_target_: perturbench.modelcore.models.scLAMBDA

# Model architecture
use_cell_emb: false
use_mask: true  # Unified mask switch for training loss and evaluation
# use_covs is now auto-configured based on data.transform.use_covs
# use_covs: False
gene_embedding_path: /fs-computility-new/upzd_share/maoxinjie/AIVC/integrate_perturbench/notebooks/neurips2025/perturbench_data/GenePT_gene_embedding_ada_text.pickle

# Network dimensions
latent_dim: 30
hidden_dim: 512

# Loss weights
lambda_MI: 200.0
eps: 0.001

# Optimization
lr: 5e-4
wd: 1e-4
lr_step_size: 30
lr_gamma: 0.2
lr_scheduler_mode: onecycle  # Options: "onecycle", "plateau", or null/step (default: StepLR with step_size=30, gamma=0.2)
# lr_scheduler_max_lr: 0.001   # Max learning rate for OneCycleLR (only used when mode=onecycle)
# lr_scheduler_total_steps: auto-calculated from dataloader size * max_epochs

# Perturbation settings
perturbation_combination_delimiter: ${data.perturbation_combination_delimiter}
perturbation_control_value: ${data.control_val}
